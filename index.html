<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Strinova Emotes Gallery</title>
  <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
  <style>
    .image-container {
      position: relative;
      width: 100px;
      height: 100px;
      display: inline-block;
    }
    .image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      cursor: pointer;
      transition: filter 0.3s;
    }
    .image:hover {
      filter: brightness(0.7);
    }
    .star-icon {
      position: absolute;
      top: 5px;
      right: 5px;
      cursor: pointer;
      font-size: 24px;
      color: gold;
      z-index: 10;
      text-shadow: 0 0 3px black;
    }
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #4CAF50;
      color: white;
      padding: 16px;
      border-radius: 4px;
      z-index: 1000;
      display: none;
    }
  </style>
</head>
<body class="bg-gray-100 p-8">
  <div class="mb-4 flex items-center">
    <span class="mr-2 font-medium">Copy mode:</span>
      <button onclick="toggleLabel()" class="ml-2 text-sm font-medium text-gray-900" id="copyModeLabel">URL Mode</button>
  </div>

    <!-- Favorites Section -->
    <div class="section">
      <h1 class="text-xl font-semibold mb-3">Favorites</h1>
      <div id="favorites-container" class="flex flex-wrap"></div>
    </div>

    <!-- Recent Section -->
    <div class="section">
      <h1 class="text-xl font-semibold mb-3">Frequently used</h1>
      <div id="recent-container" class="flex flex-wrap"></div>
    </div>

    <!-- All Images Section -->
    <div class="section">
      <h1 class="text-xl font-semibold mb-3">All</h1>
      <div id="all-container" class="flex flex-wrap"></div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">Image copied to clipboard!</div>

  <script>
    // Image URLs
    const imageUrls = [
// EmotesWiki
'EmotesWiki/Emote_60000001.png',
'EmotesWiki/Emote_60000002.png',
'EmotesWiki/Emote_60000003.png',
'EmotesWiki/Emote_60000004.png',
'EmotesWiki/Emote_60000005.png',
'EmotesWiki/Emote_60000006.png',
'EmotesWiki/Emote_60000007.png',
'EmotesWiki/Emote_60000008.png',
'EmotesWiki/Emote_60000009.png',
'EmotesWiki/Emote_60000010.png',
'EmotesWiki/Emote_60000011.png',
'EmotesWiki/Emote_60000012.png',
'EmotesWiki/Emote_60000013.png',
'EmotesWiki/Emote_60000014.png',
'EmotesWiki/Emote_60000015.png',
'EmotesWiki/Emote_60000016.png',
'EmotesWiki/Emote_60000017.png',
'EmotesWiki/Emote_60000031.png',
'EmotesWiki/Emote_60000032.png',
'EmotesWiki/Emote_60000033.png',
'EmotesWiki/Emote_60000034.png',
'EmotesWiki/Emote_60000035.png',
'EmotesWiki/Emote_60000036.png',
'EmotesWiki/Emote_60000037.png',
'EmotesWiki/Emote_60000038.png',
'EmotesWiki/Emote_60000039.png',
'EmotesWiki/Emote_60000040.png',
'EmotesWiki/Emote_60000041.png',
'EmotesWiki/Emote_60000042.png',
'EmotesWiki/Emote_60000043.png',
'EmotesWiki/Emote_60000044.png',
'EmotesWiki/Emote_60000045.png',
'EmotesWiki/Emote_60000050.png',
'EmotesWiki/Emote_60000051.png',
'EmotesWiki/Emote_60000052.png',
'EmotesWiki/Emote_60000053.png',
'EmotesWiki/Emote_60000054.png',
'EmotesWiki/Emote_60000055.png',
'EmotesWiki/Emote_60000056.png',
'EmotesWiki/Emote_60000057.png',
'EmotesWiki/Emote_60000058.png',
'EmotesWiki/Emote_60000059.png',
'EmotesWiki/Emote_60000060.png',
'EmotesWiki/Emote_60000061.png',
'EmotesWiki/Emote_60000062.png',
'EmotesWiki/Emote_60000063.png',
'EmotesWiki/Emote_60000064.png',
'EmotesWiki/Emote_60000065.png',
'EmotesWiki/Emote_60000066.png',
'EmotesWiki/Emote_60000067.png',
'EmotesWiki/Emote_60000068.png',
'EmotesWiki/Emote_60000069.png',
'EmotesWiki/Emote_60000070.png',
'EmotesWiki/Emote_60000071.png',
'EmotesWiki/Emote_60000072.png',
'EmotesWiki/Emote_60000073.png',
'EmotesWiki/Emote_60000074.png',
'EmotesWiki/Emote_60000075.png',
'EmotesWiki/Emote_60000076.png',
'EmotesWiki/Emote_60000077.png',
'EmotesWiki/Emote_60000078.png',
'EmotesWiki/Emote_60000079.png',
'EmotesWiki/Emote_60000080.png',
'EmotesWiki/Emote_60000081.png',
'EmotesWiki/Emote_60000082.png',
'EmotesWiki/Emote_60000083.png',
'EmotesWiki/Emote_60000084.png',
'EmotesWiki/Emote_60000085.png',
'EmotesWiki/Emote_60000086.png',
'EmotesWiki/Emote_60000087.png',
'EmotesWiki/Emote_60000088.png',
'EmotesWiki/Emote_60000089.png',
'EmotesWiki/Emote_60000090.png',
'EmotesWiki/Emote_60000091.png',
'EmotesWiki/Emote_60000092.png',
'EmotesWiki/Emote_60000093.png',
'EmotesWiki/Emote_60000094.png',
'EmotesWiki/Emote_60000095.png',
'EmotesWiki/Emote_60000096.png',
'EmotesWiki/Emote_60000097.png',
'EmotesWiki/Emote_60000098.png',
'EmotesWiki/Emote_60000099.png',
'EmotesWiki/Emote_60000100.png',
'EmotesWiki/Emote_60000103.png',
'EmotesWiki/Emote_60000104.png',
'EmotesWiki/Emote_60000105.png',
'EmotesWiki/Emote_60000106.png',
'EmotesWiki/Emote_60000107.png',
'EmotesWiki/Emote_60000108.png',
'EmotesWiki/Emote_60000109.png',
'EmotesWiki/Emote_60000110.png',
'EmotesWiki/Emote_60000111.png',
'EmotesWiki/Emote_60000112.png',
'EmotesWiki/Emote_60000113.png',
'EmotesWiki/Emote_60000114.png',
'EmotesWiki/Emote_60000115.png',
'EmotesWiki/Emote_60000116.png',
'EmotesWiki/Emote_60000117.png',
'EmotesWiki/Emote_60000118.png',
'EmotesWiki/Emote_60000119.png',
'EmotesWiki/Emote_60000120.png',
'EmotesWiki/Emote_60000121.png',
'EmotesWiki/Emote_60000122.png',
'EmotesWiki/Emote_60000123.png',
'EmotesWiki/Emote_60000124.png',
'EmotesWiki/Emote_60000125.png',
'EmotesWiki/Emote_60000126.png',
'EmotesWiki/Emote_60000127.png',
'EmotesWiki/Emote_60000128.png',
'EmotesWiki/Emote_60000129.png',
'EmotesWiki/Emote_60000130.png',
'EmotesWiki/Emote_60000131.png',
'EmotesWiki/Emote_60000132.png',
'EmotesWiki/Emote_60000133.png',
'EmotesWiki/Emote_60000134.png',
'EmotesWiki/Emote_60000135.png',
'EmotesWiki/Emote_60000136.png',
'EmotesWiki/Emote_60000137.png',
'EmotesWiki/Emote_60000138.png',
'EmotesWiki/Emote_60000140.png',
'EmotesWiki/Emote_60000141.png',
'EmotesWiki/Emote_60000142.png',
'EmotesWiki/Emote_60000143.png',
'EmotesWiki/Emote_60000144.png',
'EmotesWiki/Emote_60000145.png',
'EmotesWiki/Emote_60000146.png',
'EmotesWiki/Emote_60000147.png',
'EmotesWiki/Emote_60000148.png',
'EmotesWiki/Emote_60000149.png',
'EmotesWiki/Emote_60000150.png',
'EmotesWiki/Emote_60000151.png',
'EmotesWiki/Emote_60000152.png',
'EmotesWiki/Emote_60000153.png',
'EmotesWiki/Emote_60000154.png',
'EmotesWiki/Emote_60001001.png',
'EmotesWiki/Emote_60001002.png',
'EmotesWiki/Emote_60001003.png',
'EmotesWiki/Emote_60001004.png',
'EmotesWiki/Emote_60001005.png',
'EmotesWiki/Emote_60001006.png',
'EmotesWiki/Emote_60001007.png',
'EmotesWiki/Emote_60001008.png',
'EmotesWiki/Emote_60001009.png',
'EmotesWiki/Emote_60001010.png',
'EmotesWiki/Emote_60001011.png',
'EmotesWiki/Emote_60001012.png',
'EmotesWiki/Emote_60001013.png',
'EmotesWiki/Emote_60001014.png',
'EmotesWiki/Emote_60001015.png',
'EmotesWiki/Emote_60001016.png',
'EmotesWiki/Emote_60001017.png',
'EmotesWiki/Emote_60001018.png',
'EmotesWiki/Emote_60001019.png',
'EmotesWiki/Emote_60001020.png',
'EmotesWiki/Emote_60001021.png',
'EmotesWiki/Emote_60001022.png',
'EmotesWiki/Emote_60001023.png',
'EmotesWiki/Emote_60001024.png',
'EmotesWiki/Emote_60001025.png',
'EmotesWiki/Emote_60001026.png',
'EmotesWiki/Emote_60001027.png',
'EmotesWiki/Emote_60001028.png',
'EmotesWiki/Emote_60001029.png',
'EmotesWiki/Emote_60001030.png',
'EmotesWiki/Emote_60001031.png',
'EmotesWiki/Emote_60001032.png',
'EmotesWiki/Emote_60001033.png',
'EmotesWiki/Emote_60001034.png',
'EmotesWiki/Emote_60001035.png',
'EmotesWiki/Emote_60001036.png',
'EmotesWiki/Emote_60001037.png',
'EmotesWiki/Emote_61101002.png',
'EmotesWiki/Emote_61101003.png',
'EmotesWiki/Emote_61105002.png',
'EmotesWiki/Emote_61105003.png',
'EmotesWiki/Emote_61107002.png',
'EmotesWiki/Emote_61107003.png',
'EmotesWiki/Emote_61124002.png',
'EmotesWiki/Emote_61124003.png',
'EmotesWiki/Emote_61128002.png',
'EmotesWiki/Emote_61128003.png',
'EmotesWiki/Emote_61131002.png',
'EmotesWiki/Emote_61131003.png',
'EmotesWiki/Emote_61146002.png',
'EmotesWiki/Emote_61146003.png',
// ChatEmote
'ChatEmote/Chat_emote_88000001.png',
'ChatEmote/Chat_emote_88000002.png',
'ChatEmote/Chat_emote_88000003.png',
'ChatEmote/Chat_emote_88000004.png',
'ChatEmote/Chat_emote_88000006.png',
'ChatEmote/Chat_emote_88000007.png',
'ChatEmote/Chat_emote_88000008.png',
'ChatEmote/Chat_emote_88000010.png',
'ChatEmote/Chat_emote_88000012.png',
'ChatEmote/Chat_emote_88000013.png',
'ChatEmote/Chat_emote_88000020.png',
'ChatEmote/Chat_emote_88000027.png',
'ChatEmote/michele-surrender.png',
// PopTeamEpic
'PopTeamEpic/1390_popukoAngry.png',
'PopTeamEpic/1432_popukoAww.png',
'PopTeamEpic/1631_popukoOopsie.png',
'PopTeamEpic/1656_popukoUrgh.png',
'PopTeamEpic/2068_PopukoFU.png',
'PopTeamEpic/2181_popukoUguu.png',
'PopTeamEpic/2212_popukoPekpek.png',
'PopTeamEpic/2268_popukoInterdasting.png',
'PopTeamEpic/2269_popukoHiss.png',
'PopTeamEpic/2333_popukoStrongshy.png',
'PopTeamEpic/2622_popukoPat.png',
'PopTeamEpic/2648_popukoHeckyea.png',
'PopTeamEpic/2917_popukoScreenie.png',
'PopTeamEpic/3151_popukoWhale.png',
'PopTeamEpic/3248_popukoSob.png',
'PopTeamEpic/4911_popukoWutyousay.png',
'PopTeamEpic/5888_popukoShock.png',
'PopTeamEpic/6381_popukoCool.png',
'PopTeamEpic/7154_popukoAiyee.png',
'PopTeamEpic/8845_popukoNyeh.png',
'PopTeamEpic/9332_popukoUrm.png',
'PopTeamEpic/images.png',
'PopTeamEpic/IMG_1238-1-1024x663.png',

    ];

    // State tracking with localStorage persistence
    let favorites = new Set();
    let recent = [];
    // Add this variable to track the copy mode
    let copyImageMode = false;

    // DOM elements
    const allContainer = document.getElementById('all-container');
    const favoritesContainer = document.getElementById('favorites-container');
    const recentContainer = document.getElementById('recent-container');
    const toast = document.getElementById('toast');

    // Load favorites from localStorage
    function loadFavorites() {
      const savedFavorites = localStorage.getItem('imageFavorites');
      if (savedFavorites) {
        try {
          favorites = new Set(JSON.parse(savedFavorites));
        } catch (e) {
          console.error('Error loading favorites:', e);
          favorites = new Set();
        }
      }
    }

    // Save favorites to localStorage
    function saveFavorites() {
      localStorage.setItem('imageFavorites', JSON.stringify(Array.from(favorites)));
    }

    // Load recent from localStorage
    function loadRecent() {
      const savedRecent = localStorage.getItem('imageRecent');
      if (savedRecent) {
        try {
          recent = JSON.parse(savedRecent);
        } catch (e) {
          console.error('Error loading recent:', e);
          recent = [];
        }
      }
    }

    // Save recent to localStorage
    function saveRecent() {
      localStorage.setItem('imageRecent', JSON.stringify(recent));
    }

    // Save mode to localStorage
    function saveCopyImageMode() {
      localStorage.setItem('copyImageMode', JSON.stringify(copyImageMode));
    }

    // Save mode to localStorage
    function loadCopyImageMode() {
      const mode = localStorage.getItem('copyImageMode');
      if (mode) {
        try {
          copyImageMode = JSON.parse(mode);
        } catch (e) {
          console.error('Error loading copy image mode:', e);
          recent = [];
        }
      }
    }

    // Function to show toast notification
    function showToast() {
      toast.style.display = 'block';
      setTimeout(() => {
        toast.style.display = 'none';
      }, 2000);
    }

    // Function to copy to clipboard
    async function copyToClipboard(url, el) {
      try {
        // Get base URL of the current page
        const baseUrl = window.location.origin + window.location.pathname.replace(/\/[^\/]*$/, '/');
        // Construct absolute URL
        const absoluteUrl = new URL(url, baseUrl).href;
        
        if (copyImageMode) {
          // Copy the image itself
          const img = await fetch(absoluteUrl);
          const blob = await img.blob();
          const data = [new ClipboardItem({ [blob.type]: blob })];
          await navigator.clipboard.write(data);
        } else {
          // Copy the absolute URL
          await navigator.clipboard.writeText(absoluteUrl);
        }
        showToast();
      } catch (err) {
        console.error('Failed to copy: ', err);
        alert('Failed to copy: ' + err.message);
      }
    }

  // Function to update toggle label
  function updateToggleLabel() {
    const label = document.getElementById('copyModeLabel');
    label.textContent = copyImageMode ? 'Image' : 'URL';
    
    // Update toast message text
    toast.textContent = copyImageMode ? 'Image copied to clipboard!' : 'URL copied to clipboard!';
  }

  // Add this to your initialization code
  document.addEventListener('DOMContentLoaded', function() {
    initializeGallery();
    
    updateToggleLabel();
  });

  function toggleLabel() {
      copyImageMode = !copyImageMode
      updateToggleLabel();
      saveCopyImageMode();
  }

    // Function to add to recent
    function addToRecent(url) {
      // Remove if already in the list
      recent = recent.filter(item => item !== url);
      
      // Add to beginning of array
      recent.unshift(url);
      
      // Keep only last 10
      if (recent.length > 10) {
        recent = recent.slice(0, 10);
      }
      
      // Save to localStorage
      saveRecent();
      
      // Update the recent view
      updateRecentView();
    }

    // Function to update the recent view
    function updateRecentView() {
      recentContainer.innerHTML = '';
      
      if (recent.length === 0) {
        recentContainer.innerHTML = '<p class="text-gray-500 italic p-2">No recent clicks</p>';
        return;
      }
      
      recent.forEach(url => {
        const container = createImageElement(url);
        recentContainer.appendChild(container);
      });
    }

    // Function to toggle favorite status
    function toggleFavorite(url, starIcon) {
      if (favorites.has(url)) {
        favorites.delete(url);
        starIcon.innerHTML = '☆';
      } else {
        favorites.add(url);
        starIcon.innerHTML = '★';
      }
      
      // Save to localStorage
      saveFavorites();
      
      // Update the favorites view
      updateFavoritesView();
      
      // Update all images view to reflect star changes
      updateAllImagesView();
    }

    // Function to update the favorites view
    function updateFavoritesView() {
      favoritesContainer.innerHTML = '';
      
      if (favorites.size === 0) {
        favoritesContainer.innerHTML = '<p class="text-gray-500 italic p-2">No favorites yet</p>';
        return;
      }
      
      Array.from(favorites).forEach(url => {
        const container = createImageElement(url);
        favoritesContainer.appendChild(container);
      });
    }

    // Function to update all images view
    function updateAllImagesView() {
      allContainer.innerHTML = '';
      
      imageUrls.forEach(url => {
        const container = createImageElement(url);
        allContainer.appendChild(container);
      });
    }

    // Function to create an image element with its container and star
    function createImageElement(url) {
      const container = document.createElement('div');
      container.className = 'image-container';
      
      const img = document.createElement('img');
      
      img.src = url;
      img.className = 'image';
      img.addEventListener('click', function(el) {
        copyToClipboard(url,el.target);
        addToRecent(url);
      });
      
      const starIcon = document.createElement('div');
      starIcon.className = 'star-icon';
      starIcon.innerHTML = favorites.has(url) ? '★' : '☆';
      starIcon.addEventListener('click', function(e) {
        e.stopPropagation(); // Prevent triggering the image click
        toggleFavorite(url, starIcon);
      });
      
      container.appendChild(img);
      container.appendChild(starIcon);
      
      return container;
    }

    // Function to clean up localStorage
    function cleanUpLocalStorage() {
      // Load saved favorites and recent images
      loadFavorites();
      loadRecent();

      // Convert imageUrls array to a Set for faster lookup
      const validImages = new Set(imageUrls);

      // Filter favorites to only keep valid images
      favorites = new Set([...favorites].filter(url => validImages.has(url)));
      saveFavorites();

      // Filter recent list to only keep valid images
      recent = recent.filter(url => validImages.has(url));
      saveRecent();
    }

    // Initialize the view
    function initializeGallery() {
      // Clean up localStorage from old data
      cleanUpLocalStorage();

      // Load saved state
      loadFavorites();
      loadRecent();
      loadCopyImageMode();
      saveCopyImageMode();
      
      // Initialize views
      updateAllImagesView();
      updateFavoritesView();
      updateRecentView();
    }

    // Start the app
    document.addEventListener('DOMContentLoaded', initializeGallery);
  </script>
</body>
</html>